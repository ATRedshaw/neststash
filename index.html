<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neststash - Home Shopping Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <link rel="icon" href="public/favicon.ico">
    <link rel="apple-touch-icon" href="public/apple-touch-icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Neststash">
</head>
<body>
    <div class="container">
        <header>
            <h1>Neststash</h1>
            <p>Track items for your new home</p>
            <button id="open-settings" class="settings-btn" title="Settings">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="add-item">Add Item</button>
            <button class="tab-btn" data-tab="view-items">View Items</button>
        </div>

        <div class="tab-content active" id="add-item">
            <form id="item-form">
                <div class="form-group">
                    <label for="item-photo">Photo</label>
                    <div class="photo-container">
                        <input type="file" id="item-photo" accept="image/*" capture>
                        <button type="button" id="take-photo" class="btn photo-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="6" width="18" height="12" rx="2"/><circle cx="12" cy="12" r="3"/><path d="M9 3v3M15 3v3"/></svg>
                            Take Photo
                        </button>
                        <div id="photo-preview"></div>
                        <div id="photo-compression-controls" class="compression-controls" style="display: none;">
                            <label for="item-photo-quality">Compression: <span id="item-quality-value">70%</span></label>
                            <div class="range-with-value">
                                <input type="range" id="item-photo-quality" min="0.1" max="1.0" step="0.1" value="0.7">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="item-name">Item Name</label>
                    <input type="text" id="item-name" required placeholder="Name of the item">
                </div>
                
                <div class="form-group">
                    <label for="item-category">Category</label>
                    <div class="dropdown-wrapper">
                        <input type="text" id="item-category" class="dropdown-input" required placeholder="Furniture, Kitchen, etc.">
                        <button type="button" class="dropdown-toggle" tabindex="-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                        </button>
                        <div id="category-dropdown" class="dropdown-list"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="item-shop">Shop</label>
                    <div class="dropdown-wrapper">
                        <input type="text" id="item-shop" class="dropdown-input" placeholder="Where did you find it?">
                        <button type="button" class="dropdown-toggle" tabindex="-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                        </button>
                        <div id="shop-dropdown" class="dropdown-list"></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="item-price">Price</label>
                    <div class="price-input">
                        <span id="currency-symbol" class="currency">£</span>
                        <input type="number" id="item-price" step="0.01" min="0" placeholder="0.00">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="item-notes">Notes</label>
                    <textarea id="item-notes" placeholder="Any additional details..."></textarea>
                </div>
                
                <button type="submit" class="btn primary">Save Item</button>
            </form>
        </div>
        
        <div class="tab-content" id="view-items">
            <div id="loading-spinner" class="loading-container">
                <div class="spinner"></div>
                <p>Loading items...</p>
            </div>
            
            <div class="filter-container">
                <div class="search-section">
                    <div class="filter-section-header">
                        <h3 class="filter-section-title">Search & Filter</h3>
                    </div>
                    <div class="search-and-filters">
                        <div class="search-bar">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
                            <input type="text" id="search-input" placeholder="Search items...">
                        </div>
                        <div class="filter-fields">
                            <div class="dropdown-wrapper">
                                <input type="text" id="filter-category" class="dropdown-input" placeholder="Category">
                                <button type="button" class="dropdown-toggle" tabindex="-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                                </button>
                                <div id="filter-category-dropdown" class="dropdown-list"></div>
                            </div>
                            <div class="dropdown-wrapper">
                                <input type="text" id="filter-shop" class="dropdown-input" placeholder="Shop">
                                <button type="button" class="dropdown-toggle" tabindex="-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                                </button>
                                <div id="filter-shop-dropdown" class="dropdown-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="sort-section">
                    <div class="filter-section-header">
                        <h3 class="filter-section-title">Sort By</h3>
                    </div>
                    <div class="sort-options">
                        <button class="btn sort-btn" data-sort="name">
                            Name
                            <span class="sort-direction">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 15l-6-6-6 6"/>
                                </svg>
                            </span>
                        </button>
                        <button class="btn sort-btn" data-sort="category">
                            Category
                            <span class="sort-direction">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 15l-6-6-6 6"/>
                                </svg>
                            </span>
                        </button>
                        <button class="btn sort-btn" data-sort="shop">
                            Shop
                            <span class="sort-direction">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 15l-6-6-6 6"/>
                                </svg>
                            </span>
                        </button>
                        <button class="btn sort-btn" data-sort="price">
                            Price
                            <span class="sort-direction">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 15l-6-6-6 6"/>
                                </svg>
                            </span>
                        </button>
                        <button class="btn sort-btn active" data-sort="date">
                            Date
                            <span class="sort-direction desc">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 15l-6-6-6 6"/>
                                </svg>
                            </span>
                        </button>
                    </div>
                </div>
                
                <div class="filter-actions">
                    <button id="clear-filters" class="btn secondary">Clear All</button>
                </div>
            </div>
            
            <div id="items-container" class="items-grid"></div>
        </div>
    </div>

    <!-- Item Modal -->
    <div id="item-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-item-details"></div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Settings</h2>
            <div class="settings-section">
                <div class="settings-row">
                    <label for="currency-setting">Currency:</label>
                    <select id="currency-setting" class="currency-select">
                        <option value="£">£ (Pound)</option>
                        <option value="$">$ (Dollar)</option>
                        <option value="€">€ (Euro)</option>
                        <option value="¥">¥ (Yen)</option>
                        <option value="custom">Custom...</option>
                    </select>
                    <input type="text" id="custom-currency" maxlength="2" placeholder="¤" style="display: none; width: 50px; margin-left: 8px;">
                </div>
                <div class="settings-row">
                    <label for="default-sort">Default Sort:</label>
                    <select id="default-sort" class="settings-select">
                        <option value="date-desc">Date (newest first)</option>
                        <option value="date-asc">Date (oldest first)</option>
                        <option value="name-asc">Name (A-Z)</option>
                        <option value="name-desc">Name (Z-A)</option>
                        <option value="price-asc">Price (low to high)</option>
                        <option value="price-desc">Price (high to low)</option>
                    </select>
                </div>
                <div class="settings-row">
                    <label for="image-quality">Default Image Compression:</label>
                    <div class="range-with-value">
                        <input type="range" id="image-quality" min="0.1" max="1.0" step="0.1" value="0.7">
                        <span id="quality-value">70%</span>
                    </div>
                    <p class="setting-description">Lower quality = smaller file size</p>
                </div>
                <div class="settings-row">
                    <label for="show-image-size">Show Image Size:</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="show-image-size" checked>
                        <span class="toggle-slider"></span>
                    </div>
                </div>
                <div class="settings-row">
                    <label>Bulk Compression:</label>
                    <div class="bulk-compression">
                        <div class="range-with-value">
                            <input type="range" id="bulk-compression-level" min="0.1" max="0.9" step="0.1" value="0.7">
                            <span id="bulk-compression-value">70%</span>
                        </div>
                        <p class="setting-description">Compress all existing images to this quality level</p>
                        <button id="run-bulk-compression" class="btn secondary">Compress All Images</button>
                        <p class="compression-note">Note: Only images that can be reduced by at least 15% will be compressed. This ensures image quality isn't degraded unless there's a meaningful file size benefit.</p>
                    </div>
                </div>
                <div class="settings-row">
                    <label>Application Updates:</label>
                    <div class="update-controls">
                        <p class="setting-description">Get latest app features without affecting your data</p>
                        <button id="refresh-app" class="btn secondary">Refresh Application</button>
                    </div>
                </div>
                <div class="settings-row data-management">
                    <label>Data Management:</label>
                    <div class="data-buttons">
                        <button id="export-data" class="btn secondary full-width">Export Data</button>
                        <label for="import-data" class="btn secondary full-width">
                            Import Data
                            <input type="file" id="import-data" accept=".json" style="display: none;">
                        </label>
                    </div>
                </div>
                
                <div class="settings-row danger-zone">
                    <label>Danger Zone:</label>
                    <div class="danger-description">
                        <p>These actions are destructive and cannot be undone. Please proceed with caution.</p>
                    </div>
                    <button id="delete-all-items" class="btn danger full-width">Delete All Items</button>
                </div>
                
                <button id="save-settings" class="btn primary">Save Settings</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/neststash/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html> 